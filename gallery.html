<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>FindMyPet — Always Full Gallery</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.css"/>
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.Default.css"/>
<style>
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;background:#eef7ff;}
header{text-align:center;padding:20px;background:linear-gradient(90deg,#0b76ef,#075fb8);color:white;}
main{max-width:1200px;margin:auto;padding:16px;display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px;}
.card{background:white;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.08);display:flex;flex-direction:column;overflow:hidden;}
.card img{width:100%;height:180px;object-fit:cover;}
.card-content{padding:12px;display:flex;flex-direction:column;gap:4px;}
.card-content h3{margin:0;color:#063a58;}
.card-content p{margin:0;color:#244c63;font-size:14px;}
.card-content span{font-weight:600;}
#map{width:100%;height:500px;border-radius:12px;margin:20px 0;}
footer{text-align:center;padding:12px;color:#33596b;font-size:13px;}
.btn-form{display:inline-block;margin-top:5px;padding:5px 8px;background:#0b76ef;color:white;border-radius:6px;text-decoration:none;font-size:12px;}
</style>
</head>
<body>
<header>
<h1>FindMyPet — Always Full Gallery</h1>
<p>Dummy pets are always shown for a lively map</p>
</header>

<main id="cards"></main>
<div id="map"></div>
<footer>&copy; FindMyPet</footer>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet.markercluster/dist/leaflet.markercluster.js"></script>

<script>
// ===== CONFIG =====
const NUM_DUMMIES = 5000;         // Number of dummy pets
const UPDATE_INTERVAL = 10*60*1000; // 10 minutes
const PET_TYPES = ['Dog','Cat','Rabbit','Bird','Hamster'];
const LOST_FOUND = ['Lost','Found'];
const PHOTO_PLACEHOLDER = "https://place-puppy.com/400x180";
const FORM_BASE_URL = "https://docs.google.com/forms/d/e/1FAIpQLSdTXTt55-XIJ38Yq1rkfbWXpXnqml1QrI--1-TnQU3oU-bzQg/viewform?usp=pp_url";
// =================

// Map setup
const map = L.map('map').setView([20,0],2);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
  attribution:'&copy; OpenStreetMap contributors'
}).addTo(map);
let markers = L.markerClusterGroup();
map.addLayer(markers);

// Random generators
function randomCoord(){ return {lat:(Math.random()*180)-90, lng:(Math.random()*360)-180}; }
function randomName(){ const letters='ABCDEFGHIJKLMNOPQRSTUVWXYZ'; return letters.charAt(Math.floor(Math.random()*letters.length))+letters.charAt(Math.floor(Math.random()*letters.length))+Math.floor(Math.random()*9999); }

// Generate dummy pets
function generateDummyPets(num){ 
  let pets=[]; 
  for(let i=0;i<num;i++){
    const coord=randomCoord();
    pets.push({
      name: randomName(),
      type: PET_TYPES[Math.floor(Math.random()*PET_TYPES.length)],
      status: LOST_FOUND[Math.floor(Math.random()*LOST_FOUND.length)],
      photo: PHOTO_PLACEHOLDER,
      latitude: coord.lat,
      longitude: coord.lng,
      accuracy: Math.floor(Math.random()*50)+5,
      contact: "+0000000000"
    });
  } 
  return pets; 
}

// Render gallery
function renderGallery(pets){
  const container = document.getElementById('cards');
  container.innerHTML='';
  markers.clearLayers();

  pets.forEach(p=>{
    const formLink = FORM_BASE_URL +
      `&entry.1246519423=${encodeURIComponent(p.name||'')}` +
      `&entry.640822630=${encodeURIComponent(p.latitude||'')}` +
      `&entry.658800613=${encodeURIComponent(p.longitude||'')}`;

    // Card
    const card=document.createElement('div');
    card.className='card';
    card.innerHTML=`
      <img src="${p.photo}" alt="Pet Photo">
      <div class="card-content">
        <h3>${p.name} (${p.status})</h3>
        <p><span>Type:</span> ${p.type}</p>
        <p><span>Location:</span> ${p.latitude.toFixed(2)}, ${p.longitude.toFixed(2)} (±${p.accuracy}m)</p>
        <p><span>Contact:</span> ${p.contact}</p>
        <a href="${formLink}" target="_blank" class="btn-form">Report Sighting / Update</a>
      </div>`;
    container.appendChild(card);

    // Map marker
    const marker = L.marker([p.latitude,p.longitude]);
    marker.bindPopup(`<strong>${p.name} (${p.status})</strong><br>Type: ${p.type}<br>Contact: ${p.contact}<br><a href="${formLink}" target="_blank" style="color:#0b76ef;text-decoration:underline;">Report Sighting / Update</a>`);
    markers.addLayer(marker);
  });

  // Adjust map to show all markers
  const bounds = pets.map(p=>[p.latitude,p.longitude]);
  if(bounds.length>0) map.fitBounds(bounds,{padding:[50,50]});
}

// Initial load
let pets = generateDummyPets(NUM_DUMMIES);
renderGallery(pets);

// Refresh dummy pets every 10 minutes
setInterval(()=>{
  pets = generateDummyPets(NUM_DUMMIES);
  renderGallery(pets);
}, UPDATE_INTERVAL);
</script>
</body>
</html>
